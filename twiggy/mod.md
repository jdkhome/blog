# 鉴权方式

说到鉴权，首选要提授权，业务中通过各种方式，完成了用户身份验证之后，调用Twiggy的方法为用户生成有期限的v-token  
之后用户的请求需要**在header中带上v-token**以表身份。

当springboot 接受到请求时，Twiggy通过切面的方式在controller方法处理之前先进行鉴权  
如果鉴权不通过 则会直接抛出 无权限异常

鉴权的顺序是:  
**1.功能鉴权** -> **2.资源鉴权**

## 功能鉴权

上一节中 介绍了权限的来源，Twiggy在处理鉴权时取出请求的uri与已有权限对比即完成功能鉴权

## 资源鉴权

### 前置资源鉴权

当请求参数中已经包含了需要被鉴权的资源时，即可使用前置资源鉴权。

在接口方法处理之前，即可完成数据鉴权

**举例：**  
**通过userId获取订单列表**接口


### 后置资源鉴权

当请求参数中不包含需要被鉴权的资源时，则只能在业务代码中 获取到了具体的资源在进行权限判断

**举例：**  
**通过orderNo获取订单详情**接口 只有查询到订单之后才知道订单对应的userId, 请求token是否有权访问
